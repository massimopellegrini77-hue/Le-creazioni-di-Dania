<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Le creazioni di Dania — Cucito fatto a mano</title>
  <meta name="description" content="Prodotti di cucito fatti a mano: accessori, pochette, organizer e idee regalo personalizzate." />
  <link rel="icon" href="logo.jpg" type="image/jpeg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{--maxw:1100px;--c1:#222;--c2:#555;--brand:#c24d3c;--brand2:#ffe6dc;--bg:#faf8fb}
    *{box-sizing:border-box}
    body{margin:0;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial; color:var(--c1); background:var(--bg)}
    a{color:var(--brand);text-decoration:none}
    img{max-width:100%;display:block}
    header{position:sticky;top:0;background:#fff7;backdrop-filter:saturate(150%) blur(10px);border-bottom:1px solid #eee;z-index:10}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:0 16px}
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;gap:10px;align-items:center}
    nav ul{display:flex;gap:18px;list-style:none;margin:0;padding:0}
    nav a{color:var(--c1);font-weight:500}
    .btn{display:inline-block;padding:10px 16px;border-radius:10px;border:1px solid var(--brand);color:white;background:var(--brand);transition:.2s}
    .btn:hover{filter:brightness(0.95)}
    .btn.satispay{background:#e53b3b;border-color:#e53b3b;color:#fff}
    .actions{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-top:6px}
    .btn.outline{background:transparent;color:var(--brand)}
    .hero{display:grid;grid-template-columns:1.1fr 0.9fr;gap:24px;align-items:center;padding:28px 0}
    .hero h1{font-size:clamp(28px,3.6vw,42px);margin:0 0 8px;color:var(--brand)}
    .hero p{color:var(--c2);margin:0 0 16px}
    .badge{display:inline-block;background:var(--brand2);color:var(--brand);padding:6px 10px;border-radius:999px;font-size:12px;margin-bottom:8px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{background:#fff;border:1px solid #eee;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
    .card .body{padding:14px;display:flex;flex:1;flex-direction:column;gap:8px}
    .price{font-weight:700;color:var(--brand)}
    .pill{display:inline-block;font-size:12px;padding:4px 8px;border-radius:999px;background:#f6f3f9;color:#7b5d84}
    .section{padding:28px 0}
    .section h2{margin:0 0 8px;color:var(--brand)}
    .muted{color:var(--c2)}
    .banner{background:linear-gradient(135deg,#fff,#f7ecff);border:1px solid #eee;padding:18px;border-radius:16px}
    footer{border-top:1px solid #eee;margin-top:28px}
    .footercols{display:grid;grid-template-columns:2fr 1fr 1fr;gap:18px;padding:22px 0}
    .legal{font-size:12px;color:#777}
    .notice{position:fixed;inset:auto 12px 12px 12px;background:#fff;border:1px solid #eee;border-radius:12px;padding:12px;display:flex;gap:12px;align-items:center;box-shadow:0 8px 16px rgba(0,0,0,.05)}
    .notice button{margin-left:auto}
    @media (max-width:900px){.hero{grid-template-columns:1fr}.grid{grid-template-columns:1fr 1fr}.footercols{grid-template-columns:1fr 1fr}}
    @media (max-width:600px){.grid{grid-template-columns:1fr}}
  
    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.86);display:flex;align-items:center;justify-content:center;gap:12px;z-index:9999;padding:20px}
    .lightbox[hidden]{display:none}
    .lightbox img{max-width:92vw;max-height:86vh;border-radius:12px;box-shadow:0 6px 40px rgba(0,0,0,.4);touch-action:none;}
    .lb-caption{position:absolute;left:20px;bottom:16px;background:rgba(0,0,0,.45);color:#fff;padding:6px 10px;border-radius:8px;font-size:14px}
    .lb-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.15);backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,.3);color:#fff;border-radius:999px;width:44px;height:44px;font-size:26px;line-height:42px;text-align:center;cursor:pointer}
    .lb-prev{left:16px}
    .lb-next{right:16px}
    .lb-close{top:16px;right:16px;transform:none;width:38px;height:38px;line-height:36px;font-size:24px}
    @media (max-width:600px){.lightbox img{max-width:95vw;max-height:78vh} .lb-btn{width:40px;height:40px;line-height:38px}}
  </style>
</head>
<body>
  <header>
    <div class="wrap topbar">
      <div class="brand">
        <img src="logo.jpg" alt="Le creazioni di Dania" style="height:50px;border-radius:8px;object-fit:cover"/>
        <div>
          <div style="font-weight:700;color:var(--brand)">Le creazioni di Dania</div>
          <div style="font-size:12px;color:#7a7a7a">Cucito fatto a mano</div>
        </div>
      </div>
      <nav>
        <ul>
          <li><a href="#prodotti">Prodotti</a></li>
          <li><a href="#personalizza">Personalizza</a></li>
          <li><a href="#spedizioni">Spedizioni</a></li>
          <li><a href="#contatti">Contatti</a></li>
        </ul>
      </nav>
      <div>
        <a class="btn outline" href="#personalizza">Richiedi preventivo</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div>
        <span class="badge">100% fatto a mano in Italia</span>
        <h1>Accessori e idee regalo artigianali</h1>
        <p class="muted">Pochette, organizer e accessori in tessuto, anche personalizzati con nome ricamato.</p>
        <a href="#prodotti" class="btn">Scopri i prodotti</a>
      </div>
      <div>
        <img src="https://images.unsplash.com/photo-1503341455253-b2e723bb3dbb?q=80&w=1200&auto=format&fit=crop" alt="Set da cucito artigianale" />
      </div>
    </section>

    <section id="prodotti" class="section">
      <h2>In vetrina</h2>
      <div class="grid" id="product-grid"></div>
      <div class="banner" style="margin-top:16px">
        💡 <strong>Personalizzazioni</strong>: vuoi un nome ricamato o una misura diversa? Vai alla sezione <a href="#personalizza">Personalizza</a> e compila il modulo.
      </div>
    </section>

    <section id="personalizza" class="section" novalidate>
      <h2>Personalizza il tuo prodotto</h2>
      <p class="muted">Inserisci la richiesta, ti risponderemo con un preventivo in 24h.</p>
      <form action="https://formspree.io/f/movlbejp" method="POST" class="card" style="padding:16px">
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
          <label>Nome e cognome<br/><input name="nome" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:10px"/></label>
          <label>Email<br/><input type="email" name="email" required style="width:100%;padding:10px;border:1px solid #ddd;border-radius:10px"/></label>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px">
          <label>Prodotto<br/>
            <select name="prodotto" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:10px">
              <option>Pochette</option>
              <option>Organizer</option>
              <option>Altro</option>
            </select>
          </label>
          <label>Budget indicativo<br/><input name="budget" placeholder="Es. 20 €" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:10px"/></label>
        </div>
        
        <div style="display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px">
          <label>Telefono<br/>
            <input type="tel" name="telefono" required placeholder="+39 3XX XXX XXXX"
                   inputmode="tel"
                   pattern="[0-9+().\s-]{8,20}"
                   style="width:100%;padding:10px;border:1px solid #ddd;border-radius:10px"/>
            <small id="phone-error" style="display:none;color:#c24d3c">Inserisci un numero valido (es. +39 3XX XXX XXXX).</small>
          </label>
        </div>
    
        <label style="display:block;margin-top:12px">Dettagli richiesta<br/>
          <textarea name="dettagli" rows="4" placeholder="Misure, colori, nome da ricamare…" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:10px"></textarea>
        </label>
        <div style="display:flex;gap:10px;align-items:center;margin-top:12px">
          <input type="checkbox" id="privacy" required />
          <label for="privacy" class="muted" style="font-size:12px">Ho letto e accetto la <a href="#privacy" onclick="openModal('privacy-modal');return false;">Privacy Policy</a></label>
        </div>
        <small id="privacy-error" style="display:none;color:#c24d3c">Per continuare devi accettare la Privacy Policy.</small>
        <button class="btn" style="margin-top:12px;width:max-content">Invia richiesta</button>
  <p id="form-status" class="muted" style="margin-top:8px"></p>
      </form>
    </section>

    <section id="spedizioni" class="section">
      <h2>Spedizioni & Resi</h2>
      <div class="grid">
        <div class="card" style="padding:14px">
          <strong>Tempi</strong>
          <p class="muted">Produzione: 3–5 giorni lavorativi • Spedizione: 24/48h con corriere tracciato.</p>
        </div>
        <div class="card" style="padding:14px">
          <strong>Costi</strong>
          <p class="muted">Italia: €6,90 • Gratis sopra €59. Ritiro locale gratuito su appuntamento.</p>
        </div>
        <div class="card" style="padding:14px">
          <strong>Resi</strong>
          <p class="muted">Hai 14 giorni per il reso (esclusi prodotti personalizzati, salvo difetti). Contattaci per assistenza.</p>
        </div>
      </div>
    </section>

    <section id="contatti" class="section">
      <h2>Contatti</h2>
      <p class="muted">Scrivici su <a href="https://wa.me/393454895450" target="_blank">WhatsApp</a> o via email: <a href="mailto:lecreazionididania@gmail.com">lecreazionididania@gmail.com</a>. Seguici su <a href="https://www.instagram.com/lecreazionididania" target="_blank">Instagram</a>.</p>
    </section>
</main>

  <footer>
    <div class="wrap footercols">
      <div>
        <div style="font-weight:700">Le creazioni di Dania</div>
        <p class="muted">Piccola sartoria artigianale con base in Italia. Ogni pezzo è cucito con cura, in tirature limitate.</p>
      </div>
      <div>
        <strong>Info</strong>
        <ul class="muted" style="list-style:none;padding:0;margin:8px 0 0;display:grid;gap:6px">
          <li><a href="#privacy" onclick="openModal('privacy-modal');return false;">Privacy</a></li>
          <li><a href="#termini" onclick="openModal('terms-modal');return false;">Termini</a></li>
          <li><a href="#cookie" onclick="openModal('cookie-modal');return false;">Cookie</a></li>
        </ul>
      </div>
      <div>
        <strong>Pagamenti</strong>
        <p class="muted">PayPal, Satispay, carte Visa/Mastercard (via PayPal). Bonifico su richiesta.</p>
      </div>
    </div>
    <div class="wrap legal">© <span id="year"></span> Le creazioni di Dania — P.IVA 00000000000 (esempio)</div>
  </footer>

  <!-- Modals -->
  <dialog id="privacy-modal" style="max-width:800px;width:90%">
    <h3>Privacy Policy (sintesi)</h3>
    <p>Raccogliamo i dati strettamente necessari per evadere gli ordini e rispondere alle richieste. Titolare del trattamento: [Tuo Nome], [indirizzo], email: lecreazionididania@gmail.com. Puoi richiedere accesso/cancellazione dei dati in ogni momento.</p>
    <button class="btn outline" onclick="closeModal('privacy-modal')">Chiudi</button>
  </dialog>
  <dialog id="terms-modal" style="max-width:800px;width:90%">
    <h3>Termini & Condizioni (sintesi)</h3>
    <p>Vendita di prodotti artigianali. Diritto di recesso entro 14 giorni eccetto articoli personalizzati. Garanzia legale di conformità. Prezzi in EUR, IVA inclusa ove applicabile.</p>
    <button class="btn outline" onclick="closeModal('terms-modal')">Chiudi</button>
  </dialog>
  <dialog id="cookie-modal" style="max-width:800px;width:90%">
    <h3>Cookie (sintesi)</h3>
    <p>Usiamo solo cookie tecnici essenziali per il funzionamento del sito. Nessun cookie di profilazione senza consenso.</p>
    <button class="btn outline" onclick="closeModal('cookie-modal')">Chiudi</button>
  </dialog>

  <dialog id="satispay-modal" style="max-width:520px;width:92%">
    <h3>Paga con Satispay</h3>
    <p class="muted">Scansiona il QR con l'app Satispay oppure apri direttamente l'app.</p>
    <div style="display:flex;gap:16px;align-items:center;flex-wrap:wrap">
      <img id="satispay-qr" src="" alt="QR Satispay" style="width:220px;height:220px;border:1px solid #eee;border-radius:12px;padding:8px;background:#fff"/>
      <div>
        <div id="satispay-descr" class="muted" style="margin-bottom:10px"></div>
        <a id="satispay-open" href="#" target="_blank" rel="noopener" class="btn satispay">Apri Satispay</a>
        <button class="btn outline" onclick="closeModal('satispay-modal')" style="margin-left:8px">Chiudi</button>
      </div>
    </div>
  </dialog>


  <!-- Cookie notice -->
  <div class="notice" id="cookie-notice" role="dialog" aria-live="polite" aria-label="Informativa cookie" style="display:none">
    <div>🍪 Questo sito usa cookie tecnici per funzionare correttamente.</div>
    <button class="btn outline" onclick="acceptCookies()">Ok</button>
  </div>

  <script>
    // Footer year
    document.getElementById('year').textContent=new Date().getFullYear();
    // Modals helpers
    function openModal(id){document.getElementById(id).showModal()} 
    function closeModal(id){document.getElementById(id).close()}
    // Cookie notice
    const cn= document.getElementById('cookie-notice');
    if(!localStorage.getItem('cookie_ok')){cn.style.display='flex'}
    function acceptCookies(){localStorage.setItem('cookie_ok','1');cn.style.display='none'}

    // === DATI E RENDERING PRODOTTI ===
    const paypalBusiness = 'lecreazionididania@gmail.com';
    // Inserisci qui il tuo link Pay-by-Link Satispay (es. https://satispay.me/TUO_HANDLE)
    const satispayLink = 'https://satispay.me/TUO_HANDLE';
    const products = [
  {
    "name": "Astuccio doppia zip – Pirati",
    "price": 15.0,
    "img": "astuccio.jpg",
    "desc": "Bustina piatta in cotone fantasia pirati con doppia cerniera. Ideale per colori, giochi o piccoli accessori.",
    "tag": "Novità"
  },
  {
    "name": "Coprilibretto sanitario – Modello B",
    "price": 22.0,
    "img": "B.jpg",
    "desc": "Coprilibretto in tessuto doppia garza con inserto centrale in cotone fantasia. Protegge e tiene in ordine i documenti.",
    "tag": "Bimbi",
    "gallery": [
      "A.jpg",
      "C.jpg",
      "D.jpg"
    ]
  },
  {
    "name": "Pochette “Nata per sbuffare”",
    "price": 18.0,
    "img": "nata-per-sbuffare.jpg",
    "desc": "Pochette in cotone a righe verde/panna con ricamo “NATA PER SBUFFARE”, zip rossa e fodera interna.",
    "tag": "Best seller"
  },
  {
    "name": "Pochette “Nel dubbio polemizzo”",
    "price": 18.0,
    "img": "nel-dubbio-polemizzo.jpg",
    "desc": "Pochette in cotone a righe grigio/panna con ricamo “NEL DUBBIO POLEMIZZO”, zip gialla e fodera interna.",
    "tag": "Fatto a mano"
  },
  {
    "name": "Pochette “Oggi mordo” (verde)",
    "price": 18.0,
    "img": "oggi-mordo.jpg",
    "desc": "Pochette in cotone a righe verde/panna con ricamo “OGGI MORDO”. Zip chiara e fodera interna.",
    "tag": "Fatto a mano"
  },
  {
    "name": "Pochette “Oggi mordo” (grigia)",
    "price": 18.0,
    "img": "oggi-mordo2.jpg",
    "desc": "Pochette in cotone a righe grigio/panna con ricamo “OGGI MORDO”, zip rossa e fodera interna.",
    "tag": "Fatto a mano"
  },
  {
    "name": "Porta-uncinetti / lavori",
    "price": 22.0,
    "img": "porta-uncinetti.jpg",
    "desc": "Organizer arrotolabile con tasca a zip e alloggi per utensili. Chiusura a bottone, pratico da viaggio.",
    "tag": "Novità"
  },
  {
    "name": "Porta spazzolino da viaggio – Pirati",
    "price": 14.0,
    "img": "spazzolino.jpg",
    "desc": "Astuccio portaspazzolino bimbi in cotone fantasia pirati: tre scomparti interni e chiusura con bottoni a pressione. Lavabile.",
    "tag": "Bimbi"
  },
  {
    "name": "Porta spazzolino – Variante compatta",
    "price": 14.0,
    "img": "spazzolino1.jpg",
    "desc": "Porta spazzolino compatto in tessuto fantasia con alloggi interni e chiusura a pressione. Perfetto da infilare nello zaino.",
    "tag": "Bimbi"
  },
  {
    "name": "Pochette “Tonica come il gin”",
    "price": 18.0,
    "img": "tonica-come-il-gin.jpg",
    "desc": "Pochette in cotone a righe grigio/panna con ricamo “TONICA (COME IL GIN)”. Zip rossa e pratico laccetto.",
    "tag": "Fatto a mano"
  }
];

    function paySatispay(name, price){
      const descr = `${name} — € ${price.toFixed(2)}`;
      const link = `${satispayLink}`;
      const qr = 'https://quickchart.io/qr?margin=2&size=220&text=' + encodeURIComponent(link);
      const modal = document.getElementById('satispay-modal');
      document.getElementById('satispay-qr').src = qr;
      document.getElementById('satispay-open').href = link;
      document.getElementById('satispay-descr').textContent = descr;
      modal.showModal();
    }

    const grid = document.getElementById('product-grid');

    // --- Lightbox logic ---
    let LB_IMAGES = [];
    let LB_INDEX = 0;
    let LB_SCALE = 1;
    let LB_BASE = 1;
    let LB_START_DIST = 0;
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lb-img');
    const lbCaption = document.getElementById('lb-caption');
    const btnPrev = document.querySelector('.lb-prev');
    const btnNext = document.querySelector('.lb-next');
    const btnClose = document.querySelector('.lb-close');

    function updateLightbox(){
      if(!LB_IMAGES.length) return;
      LB_INDEX = (LB_INDEX + LB_IMAGES.length) % LB_IMAGES.length;
      lbImg.src = LB_IMAGES[LB_INDEX];
    }
    function openLightbox(images, start=0, caption=''){
      LB_IMAGES = images||[];
      LB_INDEX = start||0;
      updateLightbox();
      if(lbCaption) lbCaption.textContent = caption||'';
      lb.removeAttribute('hidden');
      document.body.style.overflow = 'hidden';
    }
    function closeLightbox(){
      lb.setAttribute('hidden','');
      document.body.style.overflow = '';
    }

    btnPrev?.addEventListener('click', ()=>{ LB_INDEX--; updateLightbox(); });
    btnNext?.addEventListener('click', ()=>{ LB_INDEX++; updateLightbox(); });
    btnClose?.addEventListener('click', closeLightbox);
    lb?.addEventListener('click', (e)=>{ if(e.target===lb) closeLightbox(); });
    document.addEventListener('keydown', (e)=>{
      if(lb.hasAttribute('hidden')) return;
      if(e.key==='Escape') closeLightbox();
      if(e.key==='ArrowLeft') { LB_INDEX--; updateLightbox(); }
      if(e.key==='ArrowRight'){ LB_INDEX++; updateLightbox(); }
    });

    // Zoom handlers (pinch on mobile, wheel on desktop)
    function setScale(s){
      LB_SCALE = Math.max(1, Math.min(4, s));
      lbImg.style.transform = `scale(${LB_SCALE})`;
      lbImg.style.cursor = LB_SCALE>1 ? 'zoom-out' : 'default';
    }
    setScale(1);

    lbImg.addEventListener('wheel', (e)=>{
      e.preventDefault();
      const delta = e.deltaY > 0 ? -0.1 : 0.1;
      setScale(LB_SCALE + delta);
    }, {passive:false});

    // Pointer-based pinch zoom
    const pointers = new Map();
    const dist = (a,b)=> Math.hypot(a.x-b.x, a.y-b.y);

    lbImg.addEventListener('pointerdown', (e)=>{
      lbImg.setPointerCapture(e.pointerId);
      pointers.set(e.pointerId, {x:e.clientX, y:e.clientY});
      if(pointers.size===2){
        const arr=[...pointers.values()];
        LB_START_DIST = dist(arr[0], arr[1]);
        LB_BASE = LB_SCALE;
      }
    });
    lbImg.addEventListener('pointermove', (e)=>{
      if(!pointers.has(e.pointerId)) return;
      pointers.set(e.pointerId, {x:e.clientX, y:e.clientY});
      if(pointers.size===2 && LB_START_DIST>0){
        const arr=[...pointers.values()];
        const d = dist(arr[0], arr[1]);
        const factor = d / (LB_START_DIST || d);
        setScale(LB_BASE * factor);
      }
    });
    lbImg.addEventListener('pointerup', (e)=>{ pointers.delete(e.pointerId); if(pointers.size<2){ LB_START_DIST=0; } });
    lbImg.addEventListener('pointercancel', (e)=>{ pointers.clear(); LB_START_DIST=0; });


    products.forEach(p=>{
      const card = document.createElement('article');
      card.className='card';
      card.innerHTML = `
        <img src="${p.img}" alt="${p.name}" loading="lazy" decoding="async" />
        <div class="body">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>${p.name}</strong>
            <span class="pill">${p.tag||''}</span>
          </div>
          <div class="muted">${p.desc}</div>
          <div class="price">€ ${p.price.toFixed(2)}</div>
          <div class="actions">            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
            <input type="hidden" name="cmd" value="_xclick">
            <input type="hidden" name="business" value="${paypalBusiness}">
            <input type="hidden" name="item_name" value="${p.name}">
            <input type="hidden" name="amount" value="${p.price.toFixed(2)}">
            <input type="hidden" name="currency_code" value="EUR">
            <button type="submit" class="btn">Acquista</button>
          </form>            <button type="button" class="btn satispay pay-satispay">Satispay</button>          </div>        </div>`;
      const sb = card.querySelector('.pay-satispay'); if(sb){ sb.addEventListener('click', ()=> paySatispay(p.name, p.price)); }
      // dataset with images (main first + gallery)
      card.dataset.images = JSON.stringify([p.img, ...(p.gallery||[])]);
      card.dataset.caption = p.name;

      const mainImg = card.querySelector('img');
      // Click on main image opens lightbox
      if(mainImg){
        mainImg.style.cursor = 'zoom-in';
        mainImg.addEventListener('click', ()=>{
          try{ openLightbox(JSON.parse(card.dataset.images||'[]'), 0, card.dataset.caption||''); }catch(e){}
        });
      }
      // Thumbs swap + open lightbox at that index
      const thumbs = Array.from(card.querySelectorAll('.thumbs img'));
      thumbs.forEach((t,idx)=> t.addEventListener('click', ()=>{
        if(mainImg){ mainImg.src = t.src; }
        try{ openLightbox(JSON.parse(card.dataset.images||'[]'), idx+1, card.dataset.caption||''); }catch(e){}
      }));

      grid.appendChild(card);
    });
  </script>

<script>
(function () {
  const form = document.getElementById('quote-form');
  const status = document.getElementById('form-status');
  if (!form || !status) return;
  form.addEventListener('submit', async (e) => {
    const phone = form.querySelector('input[name="telefono"]');
    const privacy = document.getElementById('privacy');
    const phoneErr = document.getElementById('phone-error');
    const privacyErr = document.getElementById('privacy-error');

    // Validazione Telefono (8-20 caratteri permessi + cifre/spazi/+/.())
    const raw = (phone?.value || '').trim();
    const ok = /^[0-9+().\s-]{8,20}$/.test(raw) && (raw.replace(/\D/g,'').length >= 8);
    if (!ok) {
      e.preventDefault();
      if (phoneErr) phoneErr.style.display = 'inline';
      if (privacyErr) privacyErr.style.display = 'none';
      phone?.focus();
      return;
    } else {
      if (phoneErr) phoneErr.style.display = 'none';
    }

    // Validazione Privacy obbligatoria
    if (!privacy?.checked) {
      e.preventDefault();
      if (privacyErr) privacyErr.style.display = 'inline';
      return;
    } else {
      if (privacyErr) privacyErr.style.display = 'none';
    }

    e.preventDefault();
    status.textContent = 'Invio in corso…';
    try {
      const res = await fetch(form.action, {
        method: 'POST',
        body: new FormData(form),
        headers: { 'Accept': 'application/json' }
      });
      if (res.ok) {
        window.location.href = 'grazie.html';
      } else {
        status.textContent = 'Ops, invio non riuscito. Riprova o scrivi a lecreazionididania@gmail.com.';
      }
    } catch (err) {
      status.textContent = 'Errore di rete. Controlla la connessione e riprova.';
    }
  });
})();
</script>


  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" hidden aria-modal="true" role="dialog" aria-label="Galleria immagini">
    <button class="lb-btn lb-prev" aria-label="Immagine precedente">‹</button>
    <img id="lb-img" alt="Anteprima prodotto">
    <button class="lb-btn lb-next" aria-label="Immagine successiva">›</button>
    <button class="lb-btn lb-close" aria-label="Chiudi">✕</button>
    <div id="lb-caption" class="lb-caption"></div>
  </div>
</body>
</html>
